{{> header active_blog=true}}
<div class="meat blog">
  <div class="container">
    <div class="row">
      <div class="col-sm-8 col-sm-offset-2">
        <article>
          <div id="post">
            <div class="meta">
              <span class="name">By Martin</span>
              <a href="https://twitter.com/martin_steinman" class="twitter-small"><span class="sr-only">Twitter</span></a>
              <a href="https://www.linkedin.com/in/msteinmann" class="linkedin-small"><span class="sr-only">LinkedIn</span></a>
              <span class="date">February 21, 2015</span>
            </div>
            <h1>How we built Connecter</h1>
            <p>We wanted an easy to use app that allowed us to simultaneously share, review, markup, and have fun all at the same time.  Of course it had to be browser based, but building it from scratch still looked like a daunting task.</p>
            
            <p>WebRTC significantly reduces the barrier of entry, but we quickly learned that the difference between a simple video connection from one browser to another (like for example the Firefox Hello service) and a high-quality video conference that delivers a great experience is about 100,000 lines of JavaScript code. And then, peer-to-peer only takes you thus far and then you need a backend capable to intelligently switching video streams.</p>
            
            <p>You might remember the time when MCUs ruled the day; an expensive and complicated ‘thing’ that was able to decode, mix, transcode, and encode video streams. It required a lot of CPU power to run. No more.</p>
            
            <p>We built Connecter using mainly open source components. We wanted a backend that runs in an auto-scalable cloud environment and using a micro-services architecture. We chose CoreOS and a cluster of CoreOS virtual hosts as the base platform. We run it in Amazon AWS, but might as well move it to Google GCE.</p>
            
            <p>On top of that base architecture we run all the different components in Docker containers. Orchestration is done using CoreOS Fleet. We then created an automated build and deploy pipeline using Wercker and starting with a code repository on Bitbucket. </p>
            
            <p>The front-end we built from scratch using the new ReactJS framework from Facebook. ReactJS creates a very responsive UI and once you understand the basic principles of a virtual DOM and ReactJS components, development and testing is really fast.</p>
            
            <p>Our signalling infrastructure is based on XMPP. We stayed far away from complicated SIP. The XMPP server not only provides the basic signalling infrastructure and user authentication, it also allows exchanging all kinds of messages between participants in an efficient way. We use this for instance to create our markup feature, a collaborative capability where every participant can share at the same time and be part of the creation process.</p>
            
            <p>The video infrastructure is based on the Jitsi open source project. The Jitsi team has done an amazing job creating a very powerful video infrastructure that compares to the best. It offers features such as simulcast and SVC switching otherwise only found in very expensive commercial products. And it uses the same mechanisms and tricks used by Google to improve the Hangouts experience.</p>
            
            <p>While the Jitsi videobridge server can accommodate very large conferences with lots of participants, we optimized Connecter for smaller meetings, where collaboration matters most.</p>
            
            <p>We have a lot of ideas how we want to make Connecter even better. We will improve it in small steps and release a constant stream of new things as we go along. We will do this based on your feedback. We work iteratively, where we create a new feature, release it, and test it based on usage patterns and feedback. If it works we keep it, if it doesn’t we throw it away</p>
            <div class="row images-list">
              <div class="col-sm-1by5 col-xs-4">
                <img src="/images/coreos.png" alt="CoreOS" width="55"  />
              </div>
              <div class="col-sm-1by5 col-xs-4">
                <img src="/images/docker.png" alt="Docker" width="87"  />
              </div>
              <div class="col-sm-1by5 col-xs-4">
                <img src="/images/webrtc.png" alt="WebRTC" width="65"  />
              </div>
              <div class="clearfix visible-xs"></div>
              <div class="col-sm-1by5 col-xs-4">
                <img src="/images/react.png" alt="React" width="128" />
              </div>
              <div class="col-sm-1by5 col-xs-4">
                <img src="/images/xmpp.png" alt="React" width="69"  />
              </div>
            </div>

            <p class="twitter-share-wrap centered">
              <a class="twitter-share" href="https://twitter.com/share">Share this post on twitter</a>
            </p>
          </div>
        </article>
      </div>
    </div>
  </div>
</div>    
{{> subscribe}}
{{> footer}}
